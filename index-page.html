<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Страница товара</title>
    <link rel="stylesheet" href="stylesheets/style.css">
    <link rel="stylesheet" media="screen and (max-width: 1024px)" href="stylesheets/style1024px.css">
    <link rel="stylesheet" media="screen and (max-width: 480px)" href="stylesheets/style480px.css">
    <style>

    </style>
</head>
<body>
    <!-- ОБОЛОЧКА САЙТА-->
    <div class="container">

      <!-- ШАПКА САЙТА-->
      <header>
        <a href="index.html">
          <div class="header_logo">
            <img src="img/logo_top100px.svg" alt="logo">
            <h1 class="TechGrove">
              <span class="T">T</span>ech<span class="G">G</span>rove
            </h1>
          </div>
        </a>
  
        <!-- НАВИГАЦИЯ В БЛОКЕ-->
        <div class="header_nav">
          <nav>
            <ul>
              <a href="index.html"><li>Главная</li></a>
              <a href="index-payment.html"><li>оплата</li></a>
              <a href="index-delivery.html"><li>доставка</li></a>
              <a href="index-about-us.html"><li>О нас</li></a>
              <a href="index-basket.html"><li>Корзина</li><img class="header_basket" src="img/svg_image.png" alt="Корзина"></a>
            </ul>
          </nav>
        </div>
        <div class="burger-menu">
          <input type="checkbox" id="burgerToggle">
          <label for="burgerToggle">
            <span class="line"></span>
            <span class="line"></span>
            <span class="line"></span>
          </label>
          <ul>
            <li><a href="index.html">Главная</a></li>
            <li><a href="index-payment.html">Оплата</a></li>
            <li><a href="index-delivery.html">Доставка</a></li>
            <li><a href="index-about-us.html">О нас</a></li>
            <li><a href="index-basket.html">Корзина <img class="header_basket" src="img/svg_image.png" alt="Корзина"></a></li>
            <li class="has-submenu">
              <input type="checkbox" id="catalogToggleCheckbox">
              <label for="catalogToggleCheckbox" class="catalog-menu-toggle-label">
                <span class="line"></span>
                <span class="line"></span>
                <span class="line"></span>Каталог</label>
              <ul class="catalog-menu">
                <li><a href="index-refrigerators.html">Холодильники</a></li>
                <li><a href="index-vacuums.html">Пылесосы</a></li>
                <li><a href="index-washing-machines.html">Стиральные машины</a></li>
                <li><a href="index-microwaves.html">Микроволновки</a></li>
                <li><a href="index-dishwashers.html">Посудомоечные машины</a></li>
                <li><a href="index-coffeemaker.html">Кофемашины</a></li>
                <li><a href="index-cooker-hoods.html">Вытяжки кухонные</a></li>
                <li><a href="index-baths.html">Ванны</a></li>
              </ul>
            </li>
          </ul>
        </div>
      </header>

      <!-- ОБОЛОЧКА ОСНОВНОЙ ИНФОРМАЦИИ САЙТА-->
      <div class="content content--page">

        <!-- БЛОК ОСНОВНОЙ ИНФОРМАЦИИ САЙТА-->
        <main id="productInfo">

        </main>

      </div>
      <!-- ПОДВАЛ САЙТА -->
      <footer>
        <a href="index.html"><p class="TechGrove">
          <span class="T">T</span>ech<span class="G">G</span>rove
        </p></a>
        <div class="feedback">
          <div class="feedback--item1">Обратная связь</div>
          <div class="feedback--item">Instagram</div>
          <div class="feedback--item"><a href="https://www.instagram.com/vonsik_stanislav?igsh=MWZ6YmwyNHpyZ29sZQ==">vonsik_stanislav</a></div>
          <div class="feedback--item">VKontakte</div>
          <div class="feedback--item"><a href="https://vk.com/vonsik_stanislav">vonsik_stanislav</a></div>
          <div class="feedback--item6"> <a href="https://discord.com/invite/sdK98pgp"> Наш discord!</div>
        </div>
        <div class="footer__left__info">
          <div class="footer__info">
            <a href="index-about-us.html"><p class="footer__info__text">о нас</p></a>
            <a href="index-delivery.html"><p class="footer__info__text">доставка</p></a>
            <a href="index-payment.html"><p class="footer__info__text">оплата</p></a>
          </div>
          <a class="button__to__top go--top"  id="button__to__top">
            <img src="img/button_to_top.png" alt="">  
          </a>
        </div>
      </footer>
    </div>
    <script type="text/javascript" src="js/script.js"></script>    
    <script>
 document.addEventListener("DOMContentLoaded", function() {
    const urlParams = new URLSearchParams(window.location.search);

    // Получаем параметры URL
    const name = urlParams.get('name');
    const price = urlParams.get('price');
    const weight = urlParams.get('weight');
    const width = urlParams.get('width');
    const length = urlParams.get('length');
    const height = urlParams.get('height');
    const NoFrost = urlParams.get('NoFrost');
    const color = urlParams.get('color');
    const freshnessZone = urlParams.get('freshnessZone');
    const availability = urlParams.get('availability');
    const fullSpecs = urlParams.get('fullSpecs');
    const image = urlParams.get('image');
    const motorType = urlParams.get('motorType');
    const laundryLoadWeight = urlParams.get('laundryLoadWeight');
    const power = urlParams.get('power');
    const TypeOfCoffeeUsed = urlParams.get('TypeOfCoffeeUsed');
    const type = urlParams.get('type');
    const energyEfficiencyClass = urlParams.get('energyEfficiencyClass');
    const numberOfPlaceSettings = urlParams.get('numberOfPlaceSettings');
    const vacuumCleanerType = urlParams.get('vacuumCleanerType');
    const cleaningType = urlParams.get('cleaningType');
    const dustCollectorType = urlParams.get('dustCollectorType');
    const dustCollectorCapacity = urlParams.get('dustCollectorCapacity');
    const grill = urlParams.get('grill');

    // Функция для скрытия элемента, если значение равно null
    function hideIfNull(value) {
        return value !== null ? value : '';
    }

    // Формируем HTML-код с информацией о товаре
    const productInfo = document.getElementById('productInfo');
    productInfo.innerHTML = `
        <div class="page">
            <img class="product__img" src="${hideIfNull(image)}" alt="${hideIfNull(name)}">
            <h2>${hideIfNull(name)}</h2>
            <ul>
                <li style="display: ${hideIfNull(weight) ? 'list-item' : 'none'}"><span class="product__span">Вес: </span>${hideIfNull(weight)}</li>
                <li style="display: ${hideIfNull(width) ? 'list-item' : 'none'}"><span class="product__span">Ширина: </span>${hideIfNull(width)}</li>
                <li style="display: ${hideIfNull(length) ? 'list-item' : 'none'}"><span class="product__span">Длина: </span>${hideIfNull(length)}</li>
                <li style="display: ${hideIfNull(height) ? 'list-item' : 'none'}"><span class="product__span">Высота: </span>${hideIfNull(height)}</li>
                <li style="display: ${hideIfNull(color) ? 'list-item' : 'none'}"><span class="product__span">Цвет: </span>${hideIfNull(color)}</li>
                <li style="display: ${hideIfNull(NoFrost) ? 'list-item' : 'none'}"><span class="product__span">NoFrost: </span>${hideIfNull(NoFrost)}</li>
                <li style="display: ${hideIfNull(freshnessZone) ? 'list-item' : 'none'}"><span class="product__span">Зона свежести: </span>${hideIfNull(freshnessZone)}</li>
                <li style="display: ${hideIfNull(motorType) ? 'list-item' : 'none'}"><span class="product__span">Тип мотора: </span>${hideIfNull(motorType)}</li>
                <li style="display: ${hideIfNull(laundryLoadWeight) ? 'list-item' : 'none'}"><span class="product__span">Вес загрузки белья: </span>${hideIfNull(laundryLoadWeight)}</li>
                <li style="display: ${hideIfNull(power) ? 'list-item' : 'none'}"><span class="product__span">Мощность: </span>${hideIfNull(power)}</li>
                <li style="display: ${hideIfNull(grill) ? 'list-item' : 'none'}"><span class="product__span">Гриль: </span>${hideIfNull(grill)}</li>
                <li style="display: ${hideIfNull(TypeOfCoffeeUsed) ? 'list-item' : 'none'}"><span class="product__span">Тип используемого кофе: </span>${hideIfNull(TypeOfCoffeeUsed)}</li>
                <li style="display: ${hideIfNull(type) ? 'list-item' : 'none'}"><span class="product__span">Тип: </span>${hideIfNull(type)}</li>
                <li style="display: ${hideIfNull(energyEfficiencyClass) ? 'list-item' : 'none'}"><span class="product__span">Класс энергопотребления: </span>${hideIfNull(energyEfficiencyClass)}</li>
                <li style="display: ${hideIfNull(numberOfPlaceSettings) ? 'list-item' : 'none'}"><span class="product__span">Количество рассадочных приборов: </span>${hideIfNull(numberOfPlaceSettings)}</li>
                <li style="display: ${hideIfNull(vacuumCleanerType) ? 'list-item' : 'none'}"><span class="product__span">Тип пылесоса: </span>${hideIfNull(vacuumCleanerType)}</li>
                <li style="display: ${hideIfNull(cleaningType) ? 'list-item' : 'none'}"><span class="product__span">Тип уборки: </span>${hideIfNull(cleaningType)}</li>
                <li style="display: ${hideIfNull(dustCollectorType) ? 'list-item' : 'none'}"><span class="product__span">Тип пылесборника: </span>${hideIfNull(dustCollectorType)}</li>
                <li style="display: ${hideIfNull(dustCollectorCapacity) ? 'list-item' : 'none'}"><span class="product__span">Объем пылесборника: </span>${hideIfNull(dustCollectorCapacity)}</li>
            </ul>
            <div class="content__line"></div>
            <p>Полные характеристики: ${hideIfNull(fullSpecs)}</p>
            <div class="content__line"></div>
            <p>${hideIfNull(availability)}</p>
            <p class="page__price">${hideIfNull(price)}</p>
            <button class="catalog__buy--button" data-item-name="${name}" onclick="addToCart('${hideIfNull(name)}', '${hideIfNull(price)}')">в корзину</button>
        </div>
    `;
});

function addToCart(name, price) {
    // Получаем данные о корзине из localStorage
    let cart = JSON.parse(localStorage.getItem('cart')) || [];

    // Проверяем, есть ли уже товар с таким именем в корзине
    const existingItemIndex = cart.findIndex(item => item.name === name);

    if (existingItemIndex !== -1) {
        // Если товар уже есть в корзине, увеличиваем его количество
        cart[existingItemIndex].quantity++;
    } else {
        // Если товара с таким именем еще нет в корзине, добавляем его
        cart.push({ name, price, quantity: 1 });
    }

    // Обновляем данные о корзине в localStorage
    localStorage.setItem('cart', JSON.stringify(cart));

    // Обновляем счетчик корзины
    updateCartCounter();
    
    location.reload();
}

// Функция для обновления счетчика корзины
function updateCartCounter() {
    // Получаем данные о корзине из localStorage
    let cart = JSON.parse(localStorage.getItem('cart')) || [];

    // Обновляем счетчик корзины в шапке сайта
    document.querySelector('.header_basket').innerText = cart.length;
}
// Функция для обновления текста кнопки в корзине на обеих страницах
function updateButtonStatus() {
    const cart = JSON.parse(localStorage.getItem('cart')) || [];
    const buyButtons = document.querySelectorAll('.catalog__buy--button');
    buyButtons.forEach(button => {
        const itemName = button.dataset.itemName;
        const isInCart = cart.some(item => item.name === itemName);
        if (isInCart) {
            button.innerText = 'Добавлено';
            button.classList.add('added--to--cart');
            button.disabled = true;
        } else {
            button.innerText = 'в корзину';
            button.classList.remove('added--to--cart');
            button.disabled = false;
        }
    });
}

// Обновляем кнопки при загрузке страницы
document.addEventListener("DOMContentLoaded", function() {
    updateButtonStatus();
});
    </script>
</body>
</html>
